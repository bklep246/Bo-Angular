/**
 * Bento Modern v0.8.13
 * Copyright 2015 Thomson Reuters
 * Maintained by Chi Gao, Joe Huang, Aaron Mendez
 */
!function(a){"use strict";a.module("bento.nav.toolbar",["pascalprecht.translate","bento.services","bento.reset","bento.cookie"]).config(["$translateProvider","$bentoTranslateLoaderProvider","$bentoJSRootProvider","$bentoCookieProvider",function(a,b,c,d){var e=d.getCookie("uiCulture","en");c.configAngularTranslateProvider("bento-nav-toolbar",a,b,e)}]).constant("bentoNavToolbarConfig",{addAccessibilityToMenu:function(b){b.setAttribute("role","menu");for(var c=a.element(b).children(),d=0,e=c.length;e>d;d++){var f=c[d];this.addAccessibilityToListElements(f),f.setAttribute("role","menuitem"),a.element(f).hasClass("divider")&&f.setAttribute("role","separator")}},addAccessibilityToListElements:function(b){var c=b.getElementsByTagName("a")[0],d=a.element(b);c&&c.setAttribute("role","button"),d.hasClass("active")&&c.setAttribute("aria-checked","true"),d.hasClass("disabled")&&c.setAttribute("aria-disabled","true")},disableMenuButtons:function(b){if(b)for(var c=a.element(b).children(),d=0,e=c.length;e>d;d++){var f=c[d];f.setAttribute("tabindex","-1");var g=f.getElementsByTagName("a")[0];g&&g.setAttribute("tabindex","-1")}},enableMenuButtons:function(b){if(b)for(var c=a.element(b).children(),d=0,e=c.length;e>d;d++){var f=c[d];f.removeAttribute("tabindex");var g=f.getElementsByTagName("a")[0];g&&g.removeAttribute("tabindex")}}}).controller("bentoNavToolbarController",["$scope","$translate",function(a,b){a.$watch("lang",function(){a.lang&&b.use(a.lang.toLowerCase())})}]).directive("toolbarDropdown",["$parse","$window","$timeout","$compile","bentoNavToolbarConfig",function(b,c,d,e,f){return{restrict:"EAC",scope:!1,link:function(b,c){function d(a){c.addClass("toolbar-dropdown-close"),c.removeClass("toolbar-dropdown-open"),a.setAttribute("aria-expanded","false"),f.disableMenuButtons(g)}var e=!1,g=c[0].querySelector("ul.toolbar-dropdown-menu"),h=c[0].querySelector("a.toolbar-dropdown-toggle");c.addClass("toolbar-dropdown-close"),c.removeClass("toolbar-dropdown-open"),h.setAttribute("aria-expanded","false"),f.disableMenuButtons(g),a.element(h).bind("click",function(){h.attributes.disabled&&"disabled"===h.attributes.disabled.value||(e?d(this):(c.addClass("toolbar-dropdown-open"),c.removeClass("toolbar-dropdown-close"),h.setAttribute("aria-expanded","true"),f.enableMenuButtons(g)),e=!e)}),b.$watch(function(){return h.attributes.disabled},function(a){return a&&"disabled"===a.value?(d(h),void(e=!1)):void 0}),f.addAccessibilityToMenu(g)}}}]).directive("bentoNavToolbar",["$parse","$window","$timeout","$compile","bentoNavToolbarConfig",function(b,c,d,e,f){return{restrict:"EA",scope:{lang:"="},controller:"bentoNavToolbarController",link:function(b,g,h){function i(){g[0].hasAttribute("role")||g[0].setAttribute("role","toolbar");var d,h;m.setAttribute("role","menu");for(var i=0,k=v.length;k>i;i++){var l=v[i],n=l.offsetWidth;if(l.setAttribute("data-button-id",i),l.setAttribute("data-button-width",n),f.addAccessibilityToListElements(l),t[i]=l,a.element(l).hasClass("dropdown")&&!l.hasAttribute("data-more-buttons")){d=l.cloneNode(!0),h=l;var q={buttonElement:d,originalElement:h};w.push(q);var r=l.querySelector(".dropdown-menu");f.addAccessibilityToMenu(r)}}for(var i=0,k=w.length;k>i;i++){d=w[i].buttonElement,h=w[i].originalElement,h.parentNode.insertBefore(d,h);var s=d.getAttribute("data-button-id");if(d.removeAttribute("data-button-id"),d.setAttribute("data-dropdown-id",s),d.setAttribute("data-button-width",0),d.style.display="none",d=a.element(d),d.hasClass("dropdown")){d.removeClass("dropdown").addClass("toolbar-dropdown"),d.removeAttr("dropdown");var u=d[0].querySelector("ul.dropdown-menu");a.element(u).removeClass("dropdown-menu").addClass("toolbar-dropdown-menu");var x=d[0].querySelector("a.dropdown-toggle");a.element(x).removeClass("dropdown-toggle").removeAttr("dropdown-toggle").addClass("toolbar-dropdown-toggle")}e(d)(b.$parent)}o=p.getAttribute("data-button-id"),a.element(c).bind("resize",function(){b.$apply()}),b.$watch(function(){var a=g[0].offsetWidth;return a},function(){j()})}function j(){var b=g[0].offsetWidth,c=q,d=s?s.offsetWidth:0,e=b-d-20,f=[],h=[];q=p?p.offsetWidth:0;for(var i=0,j=t.length;j>i;i++){var k=t[i];if("true"!==k.getAttribute("data-more-buttons")){c+=Number(k.getAttribute("data-button-width"));var l,m=t[i],n=a.element(m);if(c>e){if(m.setAttribute("role","menuitem"),h.push(m),n.hasClass("dropdown")){var v=m.getAttribute("data-button-id");v='[data-dropdown-id="'+v+'"]',l=g[0].querySelector(v),l.style.display="block",m.style.display="none",h.push(l)}}else if(m.removeAttribute("role"),f.push(m),n.hasClass("dropdown")){var v=m.getAttribute("data-button-id");v='[data-dropdown-id="'+v+'"]',l=g[0].querySelector(v),l.style.display="none",m.style.display="block",f.push(l)}}}for(var w=h.length-1;w>=0;)u.insertBefore(h[w],u.firstChild),w--;for(var x=0,j=f.length;j>x;x++){r.append(f[x]);var y=f[x].getAttribute("data-button-id");o>y&&r.append(p)}p.style.display=a.element(u).children().length?"block":"none"}var k='{{ "MORE" | translate }}';void 0!==h.moreButtonLabel&&(k=h.moreButtonLabel);var l='<li class="dropdown" data-more-buttons="true" dropdown>    <a href="" class="dropdown-toggle" role="button" dropdown-toggle>'+k+'</a>    <ul role="menu" class="dropdown-menu" ng-click="$event.stopPropagation()">    </ul></li>',m=g[0].getElementsByTagName("ul")[0];if(!g[0].querySelector("[data-more-buttons]")){m.insertAdjacentHTML("beforeend",l);var n=m.lastChild;e(n)(b)}var o,p=g[0].querySelector("[data-more-buttons]"),q=p?p.offsetWidth:0,r=a.element(m),s=g[0].querySelector(".navbar-right"),t=[],u=p.querySelector("ul.dropdown-menu"),v=r.children(),w=[];d(function(){i(),j()},10)}}}])}(window.angular);
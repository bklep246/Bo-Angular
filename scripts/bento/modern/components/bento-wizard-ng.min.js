/**
 * Bento Modern v0.8.13
 * Copyright 2015 Thomson Reuters
 * Maintained by Chi Gao, Joe Huang, Aaron Mendez
 */
!function(a,b){"use strict";var c=37,d=300,e=350,f=0;b.module("bento.wizard",["ui.bootstrap","pascalprecht.translate","bento.services","bento.cookie"]).config(["$translateProvider","$bentoTranslateLoaderProvider","$bentoJSRootProvider","$bentoCookieProvider",function(a,b,c,d){var e=d.getCookie("uiCulture","en");c.configAngularTranslateProvider("bento-wizard",a,b,e)}]).controller("wizardMainController",["$scope","$rootScope","$element","$attrs","$transclude","$timeout","$window","$translate","$log",function(a,b,d,e,g,h,i,j){a.isLeftArrowDisabled=!0,a.isRightArrowDisabled=!0,d.addClass("bento-wizard"),a.$watch("lang",function(){a.lang&&j.use(a.lang.toLowerCase())}),"undefined"==typeof a.currentStep&&(a.currentStep=0),a.previousStep=0,a._useSideArrows=!("undefined"!=typeof a.useSideArrows&&"true"!==a.useSideArrows),a.onLeftArrowClick=function(){a.leftIndex>=a.displayCount?(a.$ul.css("margin-left",a.$ul[0].offsetLeft+d[0].offsetWidth-2*c+f+"px"),a.leftIndex=a.leftIndex-a.displayCount):(a.$ul.css("margin-left","0px"),a.leftIndex=0),a.updateLeftRightArrows()},a.onRightArrowClick=function(){a.numSteps-a.leftIndex-a.displayCount>=a.displayCount?(a.$ul.css("margin-left",a.$ul[0].offsetLeft-d[0].offsetWidth+2*c-f+"px"),a.leftIndex=a.leftIndex+a.displayCount):(a.$ul.css("margin-left",-a.$ul[0].offsetWidth+d[0].offsetWidth-2*c+f+"px"),a.leftIndex=a.numSteps-a.displayCount),a.updateLeftRightArrows()},a.onPreviousClick=function(){0!==a.currentStep&&(a.currentStep=parseInt(a.currentStep,10)-1)},a.onNextClick=function(){a.currentStep!==a.stepList.length-1&&(a.currentStep=parseInt(a.currentStep,10)+1)},a.onDoneClick=function(){a.onFinish()},a.onStepClick=function(b){b!==a.currentStep&&(a.currentStep=b)}}]).directive("bentoWizard",["$compile","$timeout","$window","$log",function(a,g,h,i){return{restrict:"AEC",replace:!1,scope:{onChange:"&",onFinish:"&",useSideArrows:"@",currentStep:"=?",lang:"=",demoMode:"@",isDoneButtonDisabled:"=",hideDefaultButtons:"=",hidePreviousButton:"=",hideNextButton:"=",hideDoneButton:"="},controller:"wizardMainController",link:function(j,k){function l(){var a=parseInt(j.currentStep,10);if(a=isNaN(a)?0:a,j.stepList=j.$ul.children(),j.contents=j.content.children(),j.currentStep>=j.stepList.length&&(j.currentStep=j.stepList.length-1),"undefined"!=typeof j.onChange&&j.onChange({step:a})===!1)return void(j.currentStep=j.previousStep);for(var c,d=0;d<j.stepList.length;d++){var e=b.element(j.stepList[d]);e.removeClass("previous"),d===a?(e.addClass("selected"),"undefined"!=typeof c&&c.addClass("previous")):e.removeClass("selected"),c=e}c=null,j.showButtonNext=!!(j.stepList.length>1&&a<j.stepList.length-1),j.showButtonPrevious=!!(j.stepList.length>1&&a>0),j.showButtonDone=!(1!==j.stepList.length&&a!==j.stepList.length-1);for(var f=0;f<j.contents.length;f++){var h=b.element(j.contents[f]);f===a?h.removeClass("ng-hide"):h.addClass("ng-hide")}("undefined"==typeof j.demoMode||j.demoMode===!1||"false"===j.demoMode)&&g(function(){j.content[0].focus()}),m(),j.previousStep=j.currentStep}function m(){j.currentStep=parseInt(j.currentStep,10),isNaN(j.currentStep)&&(i.warn("Wizard: `current-step` is not an integer "),j.currentStep=0);var a,b=k.hasClass("side-arrows")?k[0].offsetWidth-2*c:k[0].offsetWidth,d=j.stepList,e=0===j.currentStep?null:d[j.currentStep-1],g=d[j.currentStep],h=j.currentStep===d.length-1?null:d[j.currentStep+1],l=g.offsetLeft-j.$ul[0].offsetLeft,m="undefined"!=typeof e&&null!==e?e.offsetLeft:0,n="undefined"!=typeof h&&null!==h?b-h.offsetLeft-h.offsetWidth:0,o=g.offsetLeft,p=b-g.offsetLeft-g.offsetWidth;j.leftIndex=0;for(var q=0;q<d.length;q++){var r=d[q];if(r.offsetLeft<=0&&r.offsetLeft+r.offsetWidth>0){j.leftIndex=q;break}}a=j.leftIndex>0?-d[j.leftIndex].offsetLeft+j.$ul[0].offsetLeft:0,0>m?(a=-e.offsetLeft+j.$ul[0].offsetLeft,j.leftIndex=j.currentStep-1):0>n&&(a=-h.offsetLeft+j.$ul[0].offsetLeft-h.offsetWidth+b,j.leftIndex=j.currentStep+2-j.displayCount),0>o&&j.leftIndex>0?(a=-l,j.leftIndex--):0>p&&(a=-(l+g.offsetWidth-b),j.leftIndex=j.currentStep-j.displayCount+1),j.leftIndex+j.displayCount>j.numSteps&&j.displayCount<=j.numSteps&&(a=-j.$ul[0].offsetWidth+k[0].offsetWidth+f,a=k.hasClass("side-arrows")?a-2*c:a,j.leftIndex=j.numSteps-j.displayCount),j.$ul.css("margin-left",a+"px"),j.updateLeftRightArrows()}function n(){var a=k[0].offsetWidth,d=j.stepList.length,g=d>4?4:d;720>a&&g>2?g=2:960>a&&g>3?g=3:a>e*g+(g-1)*f&&d>g&&(g=Math.ceil(a/e)),j.displayCount=g,j.numSteps=d,j._useSideArrows&&(d>g?(k.addClass("side-arrows"),a=k[0].offsetWidth-2*c):k.removeClass("side-arrows"));var h=(a-(g-1)*f)/g;j.stepList=j.$ul.children(),h=h>e?e:h,j.$ul.css("width",j.stepList.length*(h+f)+"px"),j.stepList.css("width",h+"px"),b.element(j.stepList).removeClass("narrow"),b.element(j.stepList).addClass("flat"),j.$arrowLeft.addClass("flat"),j.$arrowRight.addClass("flat"),m()}k.addClass("ng-hide"),g(function(){function c(){for(var a=0;a<j.stepList.length;a++){var c=b.element(j.stepList[a]);c.hasClass("bento-wizard-step")||(c.addClass("bento-wizard-step"),c.append('<div class="arrow-bg"></div><div class="arrow-line arrow-line-top"></div><div class="arrow-line arrow-line-bottom"></div>'),c.on("click",e))}}function e(a){for(var b=0,c=0;c<j.stepList.length;c++)if(j.stepList[c]===a.currentTarget){b=c;break}j.onStepClick(b),j.$apply()}g(n,1),g(n,2);var f=0;b.element(h).bind("resize",function(){clearTimeout(f),f=setTimeout(n,d)});var i="{{ 'BUTTON_NEXT' | translate }}",m="{{ 'BUTTON_PREVIOUS' | translate }}",o="{{ 'BUTTON_DONE' | translate }}";j.content=b.element(k[0].querySelector(".contents")),j.contents=j.content.children();var p=b.element('<button role="button" class="btn btn-primary pull-right" role="button" aria-label="'+i+'" ng-show="showButtonNext" ng-click="onNextClick()"ng-if="!hideDefaultButtons && !hideNextButton">'+i+' <i class="glyphicons chevron-right"></i></button>'),q=b.element('<button role="button" class="btn btn-default pull-left" role="button" aria-label="'+m+'" ng-show="showButtonPrevious" ng-click="onPreviousClick()"ng-if="!hideDefaultButtons && !hidePreviousButton"><i class="glyphicons chevron-left"></i> '+m+"</button>"),r=b.element('<button class="btn btn-primary pull-right" role="button" aria-label="'+o+'"ng-disabled="isDoneButtonDisabled"ng-show="showButtonDone" ng-click="onDoneClick()"ng-if="!hideDefaultButtons && !hideDoneButton">'+o+"</button>");j.$buttonNext=p,j.$buttonPrevious=q,j.$buttonDone=r;var s=b.element('<button class="wizard-arrow arrow-left" role="button" aria-label="Left Arrow" alt="Show previous step headers" ng-disabled="isLeftArrowDisabled" ng-click="onLeftArrowClick()"></button>'),t=b.element('<button class="wizard-arrow arrow-right" role="button" aria-label="Right Arrow" alt="Show next step headers" ng-disabled="isRightArrowDisabled" ng-click="onRightArrowClick()"></button>');j.$arrowLeft=s,j.$arrowRight=t,j.content.after(r),j.content.after(p),j.content.after(q),j.content.after(s),j.content.after(t),a(r)(j),a(p)(j),a(q)(j),a(s)(j),a(t)(j),j.$ul=b.element(k[0].querySelector(".steps")),j.stepList=j.$ul.children(),k.addClass("bento-wizard"),j.$ul.wrap('<div class="bento-wizard-steps" />'),c(),j.showButtonNext=1!==j.stepList.length,j.showButtonPrevious=!1,j.showButtonDone=1===j.stepList.length,j.content.attr("tabindex",-1),j.$watch("currentStep",function(){l()}),j.$watch(function(){return j.$ul.children().length},function(){l(),c(),n()}),k.removeClass("ng-hide")}),j.updateLeftRightArrows=function(){"undefined"!=typeof j.displayCount&&(0===j.leftIndex?j.$arrowLeft.attr("disabled","disabled"):j.$arrowLeft.removeAttr("disabled"),j.leftIndex+j.displayCount>=j.numSteps?j.$arrowRight.attr("disabled","disabled"):j.$arrowRight.removeAttr("disabled"),b.element(j.stepList).removeClass("most-right"),k[0].offsetWidth<=j.displayCount*e&&b.element(j.stepList[j.leftIndex+j.displayCount-1]).addClass("most-right"))}}}}])}(window,window.angular);
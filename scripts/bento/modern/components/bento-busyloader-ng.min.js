/**
 * Bento Modern v0.8.13
 * Copyright 2015 Thomson Reuters
 * Maintained by Chi Gao, Joe Huang, Aaron Mendez
 */
!function(a,b,c){"use strict";b.module("bento.busyloader",["bento.services"]).config(["$provide","$httpProvider",function(a,b){a.factory("bentoBusyLoaderHttpInterceptor",["$q","$log",function(a){var b=function(a){return"undefined"==typeof a?c:a.busyLoader?a.busyLoader:c},d=function(a){var c=b(a);c&&c.show()},e=function(a){var c=b(a);c&&c.hide()};return{request:function(a){return d(a),a},requestError:function(b){return a.reject(b)},response:function(a){return e(a.config),a},responseError:function(b){return a.reject(b)}}}]),b.interceptors.push("bentoBusyLoaderHttpInterceptor")}]).factory("$bentoBusyLoader",["$timeout","$log","$q","$bentoServices",function(c,d,e,f){function g(d,g){function h(){V=!0,y=(new Date).getTime(),j()}function i(){u=document.getElementById("bento-busyloader-spinner-"+o),v=u.getContext("2d"),u.width=n,u.height=n,v.lineWidth=.2*n,w=u.width/2,x=u.height/2}function j(){var a=((new Date).getTime()-y)%A;v.clearRect(0,0,200,200);for(var b=0;W>b;b++)l(b,a);V&&f.rAF(k)}function k(){setTimeout(function(){j()},1)}function l(a,b){var c,d,e,f,g=Math.round(a*X),h=Math.round(g+X);if(b>=g&&g+B>=b){var i=b-g;c=G+Math.floor(P*i),d=H+Math.floor(Q*i),e=I+Math.floor(R*i),f=c<<16|d<<8|e}else if(b>=h&&h+C>=b||C>=b&&a===W-1){var j=C-b-h;c=G+Math.floor(S*j),d=H+Math.floor(T*j),e=I+Math.floor(U*j),f=c<<16|d<<8|e}else f=b>g+B&&h>b?F:E;v.beginPath(),v.arc(w,x,z,Z+a*$*Math.PI,Z+((a+1)*$-Y)*Math.PI,D),v.strokeStyle="#"+f.toString(16),v.stroke()}var m,n,o=Math.round(1e10*Math.random()),p="string"==typeof d?document.querySelector(d):d,q="";switch(g){case"small":n=m=24;break;case"large":n=m=75;break;default:n=m=50}n*=2;var r=b.element('<div id="bento-busyloader-'+o+'" class="bento-busyloader-blocker hide '+q+'"><div class="bento-busyloader-wrapper"><div class="bento-busyloader-inner"><canvas id="bento-busyloader-spinner-'+o+'" class="bento-busyloader-canvas" style="width: '+m+"px; height: "+m+'px;"></canvas></div></div></div>'),s=b.element(p),t=a.getComputedStyle(s[0]).position.trim();(0===t.length||"static"===t)&&(s[0].style.position="relative"),s.append(r),this.show=function(a){var b=e.defer(),d="undefined"==typeof a?0:parseInt(a,10);return c(function(){r.removeClass("hide"),h(),b.resolve("Busy Loader is now bocking content")},d),b.promise},this.hide=function(a){var b="undefined"==typeof a?0:parseInt(a,10),d=e.defer();return c(function(){r.addClass("hide"),V=!1,d.resolve("Busy Loader is now hidden")},b),d.promise};var u,v,w,x,y,z=.4*n,A=2e3,B=200,C=200,D=!1,E=6316128,F=16688416,G=96,H=96,I=96,J=254,K=165,L=32,M=J-G,N=K-H,O=L-I,P=M/B,Q=N/B,R=O/B,S=M/C,T=N/C,U=O/C,V=!1,W=5,X=A/W,Y=.1,Z=(-.5+.5*Y)*Math.PI,$=2/W;c(i)}var h=function(a,b){return new g(a,b)};return{getNewLoader:h}}]).directive("busyLoader",["$bentoBusyLoader","$log",function(a,b){return{scope:{busyLoader:"&",busyLoaderSize:"@"},link:function(c,d){var e=a.getNewLoader(d,c.busyLoaderSize);"undefined"==typeof c.busyLoader&&b.error("Bento Busy Loader: Variable is not defined for this directive."),c.$watch("busyLoader()",function(a){a?e.show():e.hide()})}}}])}(window,window.angular);
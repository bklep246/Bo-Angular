/**
 * Bento Modern v0.8.13
 * Copyright 2015 Thomson Reuters
 * Maintained by Chi Gao, Joe Huang, Aaron Mendez
 */
!function(a,b){"use strict";a.module("bento.toolbar",["pascalprecht.translate","bento.services","bento.reset"]).config(["$translateProvider","$bentoTranslateLoaderProvider","$bentoJSRootProvider","$bentoCookieProvider",function(a,b,c,d){var e=d.getCookie("uiCulture","en");c.configAngularTranslateProvider("bento-toolbar",a,b,e)}]).constant("bentoToolbarConfig",{buttons:[]}).controller("BentoToolbarController",["bentoToolbarConfig","$scope","$attrs","$parse","$interpolate","$translate",function(c,d,e,f,g,h){d.searchInfo={term:""},this.getAttributeValue=function(b,c,e){return a.isDefined(b)?e?g(b)(d.$parent):d.$parent.$eval(b):c},this.render=function(){d.buttons=this.getButtons(),d.hasSearch=e.onSearch||e.onSearchEnter,d.morebuttons=this.getMoreButtons(),d.moreText=this.getMoreText(),d.searchText=this.getSearchText()},d.$watch("searchInfo.term",function(){d.searchTerm!=b&&(d.searchTerm=d.searchInfo.term),d.onSearch({term:d.searchInfo.term})},!0),d.keySelectPage=function(a){13==a.which&&d.onSearchEnter({term:d.searchInfo.term})},d.$watch("lang",function(){d.lang&&h.use(d.lang.toLowerCase())})}]).directive("bentoToolbar",["$compile","$parse","$window","$timeout","$translate","bentoToolbarConfig",function(b,c,d,e,f){return{restrict:"EA",scope:{buttonConfig:"=",moreButtonConfig:"=",searchTerm:"=",onSearchEnter:"&",onSearch:"&"},controller:"BentoToolbarController",templateUrl:"../templates/toolbar/bento-toolbar.html",replace:!0,link:function(b,c,g,h){var i=b.buttonConfig,j=b.moreButtonConfig,k=[],l="",m="",n="";f(["TOOLBAR.SEARCH","TOOLBAR.MORE","TOOLBAR.MENU"]).then(function(a){l=a["TOOLBAR.MORE"],m=a["TOOLBAR.SEARCH"],n=a["TOOLBAR.MENU"]}),h.getButtons=function(){return i},h.getMoreButtons=function(){j=j?j:[];var a=k.concat(j);return a},h.getMoreText=function(){return l},h.getSearchText=function(){return m},b.$watch("buttonConfig",function(){i=b.buttonConfig,h.render()},!0),b.$watch("moreButtonConfig",function(){j=b.moreButtonConfig,h.render()},!0),d.onresize=function(){b.$apply()},b.$watch(function(){return a.element(d)[0].innerWidth},function(){h.renderMoreButtons()}),e(function(){h.renderMoreButtons()},10),h.renderMoreButtons=function(){for(var b,d,e,f=c[0].offsetWidth,g=0,j=0,m=0,o=c[0].children.length;o>m;m++)g+=c[0].children[m].offsetWidth,a.element(c[0].children[m]).hasClass("button-actions")&&(b=c[0].children[m]),a.element(c[0].children[m]).hasClass("dataTables_filter")&&(d=c[0].children[m]);if(e=a.element(c[0].querySelector(".more-buttons")),j=e?a.element(e[0]).width():0,b){var p=d?d.offsetWidth:0,q=f-p-j,r=0;k=[],0==p&&q-b.offsetWidth<=0?a.element(c[0].querySelector(".dropdown-menu")).addClass("pull-right"):a.element(c[0].querySelector(".dropdown-menu")).removeClass("pull-right");for(var m=0,o=b.children.length;o>m;m++)a.element(b.children[m]).show(),r+=b.children[m].offsetWidth,r>q&&(a.element(b.children[m]).hasClass("more-buttons")||a.element(b.children[m]).hide(),i[m]&&k.push(i[m]));l=k.length>=i.length?n:l,h.render()}}}}}])}(window.angular);
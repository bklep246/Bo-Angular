/**
 * Bento Modern v0.8.13
 * Copyright 2015 Thomson Reuters
 * Maintained by Chi Gao, Joe Huang, Aaron Mendez
 */
!function(a,b){"use strict";var c=b.module("bento.splittergroup",["bento.services"]);c.factory("splitterGroupNotification",function(){var a=[],b=function(b,c,d){"undefined"==typeof a[b]&&(a[b]=[]),a[b].push({func:c,uid:d})},c=function(b,c,d){if("undefined"!=typeof a[b])for(var e,f=a[b],g=0;g<f.length;)e=f[g],e.func===c&&e.uid===d?f.splice(g,1):g++},d=function(b,c,d){if("undefined"!=typeof a[b])for(var e=a[b],f=0;f<e.length;f++){var g=e[f];("undefined"==typeof c||null===c||g.uid===c)&&g.func(d)}};return{addNotification:b,removeNotification:c,notify:d}}).factory("splitterGroupMainHelper",["$window","$timeout",function(a,b){var c=function(c){var d=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame,e=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,f=!!d;if(f){var g=d(c);return function(){e(g)}}var h=b(c,16.66,!1);return function(){b.cancel(h)}},d=function(a,b){if("number"==typeof b)return b;if("undefined"==typeof b)return-1;var c=b.search("%")>-1?"%":"px",d=parseInt(b);return"%"===c?a[0].offsetWidth*d/100:d};return{rAF:c,parseWidth:d}}]).controller("mainController",["$scope","$element","$window","splitterGroupMainHelper","$bentoServices",function(a,c,d,e,f){function g(){a.leftMaxWidthPx=e.parseWidth(c,a.leftMaxWidth),a.rightMaxWidthPx=e.parseWidth(c,a.rightMaxWidth),a.leftMaxWidthPx>-1&&(parseInt(a.leftWidth)>a.leftMaxWidthPx&&(a.leftWidth=a.leftMaxWidthPx+"px",a.splitterLeft[0].style.width=a.leftWidth),a.splitHandleLeft[0].offsetLeft>a.leftMaxWidthPx&&(a.splitterMain[0].style.left=a.splitHandleLeft[0].style.left=a.leftWidth)),a.rightMaxWidthPx>-1&&(parseInt(a.rightWidth)>a.rightMaxWidthPx&&(a.rightWidth=a.rightMaxWidthPx+"px",a.splitterRight[0].style.width=a.rightWidth),c[0].offsetWidth-a.splitHandleRight[0].offsetLeft-a.splitHandleRight[0].offsetWidth>a.leftMaxWidthPx&&(a.splitterMain[0].style.right=a.splitHandleRight[0].style.right=a.rightWidth))}9===f.getIEVersion()&&c.addClass("ie9"),c.addClass("bento-splitter-group"),a.noCollapse()&&c.addClass("no-collapse"),a.onHandleClick=function(){a.noCollapse()||(c.toggleClass(a.actionOnLeft?"opened-left":"opened-right"),c.hasClass("opened-left")&&a.actionOnLeft?(a.splitterLeft.css("left","0"),a.splitterMain.css("left",a.leftWidth),a.splitHandleLeft.css("left",a.leftWidth)):c.hasClass("opened-right")&&!a.actionOnLeft?(a.splitterRight.css("right","0"),a.splitterMain.css("right",a.rightWidth),a.splitHandleRight.css("right",a.rightWidth)):a.actionOnLeft?(a.splitterLeft.css("left","-"+a.leftWidth),a.splitterMain.css("left","0"),a.splitHandleLeft.css("left","0")):(a.splitterRight.css("right","-"+a.rightWidth),a.splitterMain.css("right","0"),a.splitHandleRight.css("right","0")))},a.leftMaxWidthPx=e.parseWidth(c,a.leftMaxWidth),a.rightMaxWidthPx=e.parseWidth(c,a.rightMaxWidth);var h=b.element(d);(a.leftMaxWidthPx>-1||a.rightMaxWidthPx>-1)&&(h.on("resize",g),a.$on("$destroy",function(){h.off("resize",g)}));var i,j,k,l,m,n=!1;a.onHandleDown=function(b){a.actionOnLeft=-1!==b.currentTarget.className.search("handle-left"),l=c[0].offsetWidth,m=a.splitHandleLeft?a.splitHandleLeft[0].offsetWidth:a.splitHandleRight[0].offsetWidth,j=b.screenX,k=a.actionOnLeft?a.splitHandleLeft[0].offsetLeft:a.splitHandleRight[0].offsetLeft+a.splitHandleRight[0].offsetWidth,c.addClass("unselectable"),a.resizable()&&"mousedown"===b.type&&(h.on(" touchmove mousemove",a.onHandleMove),i=setTimeout(function(){c.addClass(a.actionOnLeft?"dragging-left":"dragging-right")},300)),h.one("touchend mouseup",a.onHandleUp)},a.onHandleUp=function(b){if(clearTimeout(i),c.removeClass("dragging-left"),c.removeClass("dragging-right"),n||-1===b.target.className.search("bento-splitter-handle")||a.noCollapse()){if(a.actionOnLeft){var d=a.splitHandleLeft[0].offsetLeft;d=50>d?0:d,a.leftWidth=50>d?a.leftWidth:d+"px",0===d?(c.removeClass("opened-left"),a.splitterLeft.css("left","-"+a.leftWidth),a.splitterLeft.css("width",a.leftWidth),a.splitterMain.css("left","0"),a.splitHandleLeft.css("left","0"),o=0):c.addClass("opened-left")}else{var e=l-a.splitHandleRight[0].offsetLeft-a.splitHandleRight[0].offsetWidth;e=50+m>e?0:e,a.rightWidth=50>e?a.rightWidth:e+"px",0===e?(c.removeClass("opened-right"),a.splitterRight.css("right","-"+a.rightWidth),a.splitterRight.css("width",a.rightWidth),a.splitterMain.css("right","0"),a.splitHandleRight.css("right","0"),o=0):c.addClass("opened-right")}a.eventTracking({eventName:"splitter_group_drag"})}else a.onHandleClick(b),a.eventTracking({eventName:"splitter_group_click"});c.removeClass("unselectable"),h.off("touchmove mousemove",a.onHandleMove),a.actionOnLeft?a.splitHandleLeft.one("touchstart mousedown",a.onHandleDown):a.splitHandleRight.one("touchstart mousedown",a.onHandleDown),n=!1,a.onResize&&a.onResize({side:a.actionOnLeft?"left":"right"})};var o,p,q=0,r=function(){o>0&&0!==p&&(a.actionOnLeft?a.splitterMain[0].style.left=a.splitHandleLeft[0].style.left=a.splitterLeft[0].style.width=o+"px":a.splitterMain[0].style.right=a.splitHandleRight[0].style.right=a.splitterRight[0].style.width=o+"px",a.onResize&&a.onResize({side:a.actionOnLeft?"left":"right"})),n&&e.rAF(r)};a.onHandleMove=function(b){var d=b.screenX;p=d-q,q=d,j!==d&&(p=d-j,o=k+p,o=a.actionOnLeft?o:l-o,o=0>o?0:o,o=o>l-m?l-m:o,a.actionOnLeft&&a.splitterRight&&o>a.splitHandleRight[0].offsetLeft-m?o=a.splitHandleRight[0].offsetLeft-m:!a.actionOnLeft&&a.splitterLeft&&o>l-a.splitHandleLeft[0].offsetLeft-2*m&&(o=l-a.splitHandleLeft[0].offsetLeft-2*m),n||e.rAF(r),o>0&&!c.hasClass("opened-left")&&a.actionOnLeft?(c.addClass("opened-left"),a.splitterLeft[0].style.left="0"):o>0&&!c.hasClass("opened-right")&&!a.actionOnLeft&&(c.addClass("opened-right"),a.splitterRight[0].style.right="0"),a.actionOnLeft&&a.leftMaxWidthPx>-1&&o>a.leftMaxWidthPx?o=a.leftMaxWidthPx:!a.actionOnLeft&&a.rightMaxWidthPx>-1&&o>a.rightMaxWidthPx&&(o=a.rightMaxWidthPx),n=!0)}}]).directive("bentoSplitterGroup",["$timeout","$log","splitterGroupNotification","splitterGroupMainHelper",function(a,c,d,e){return{restrict:"A",replace:!1,scope:{isLeftCollapsed:"&",isRightCollapsed:"&",resizable:"&",noCollapse:"&",_leftWidth:"@leftWidth",_rightWidth:"@rightWidth",leftMaxWidth:"@",rightMaxWidth:"@",onResize:"&",autoResize:"&",eventTracking:"&"},controller:"mainController",link:function(c,f,g){c.leftWidth="undefined"==typeof c._leftWidth||null===c._leftWidth?"300px":c._leftWidth,c.rightWidth="undefined"==typeof c._rightWidth||null===c._rightWidth?"300px":c._rightWidth,c.leftMaxWidthPx>-1&&e.parseWidth(f,c.leftWidth)>c.leftMaxWidthPx&&(c.leftWidth=c.leftMaxWidthPx+"px"),c.rightMaxWidthPx>-1&&e.parseWidth(f,c.rightWidth)>c.rightMaxWidthPx&&(c.rightWidth=c.rightMaxWidthPx+"px");for(var h=f[0].querySelector(".bento-splitter-group-main-inner"),i=f.children(),j=0;j<i.length;j++){var k=b.element(i[j]);k.hasClass("bento-splitter-group-left")?c.splitterLeft=k:k.hasClass("bento-splitter-group-main")?c.splitterMain=k:k.hasClass("bento-splitter-group-right")&&(c.splitterRight=k)}if(c.splitterLeft&&(c.splitHandleLeft=b.element('<div class="bento-splitter-handle bento-splitter-handle-left"></div>'),f.append(c.splitHandleLeft),c.splitterLeft.css("width",c.leftWidth),c.splitterLeft.css("left","-"+c.leftWidth),c.splitHandleLeft.one("touchstart mousedown",c.onHandleDown),h.className+=" has-left-pane",d.addNotification("openLeft",function(){f.hasClass("opened-left")||(c.actionOnLeft=!0,c.onHandleClick(null))},g.id),d.addNotification("closeLeft",function(){f.hasClass("opened-left")&&(c.actionOnLeft=!0,c.onHandleClick(null))},g.id)),c.splitterRight&&(c.splitHandleRight=b.element('<div class="bento-splitter-handle bento-splitter-handle-right"></div>'),f.append(c.splitHandleRight),c.splitterRight.css("width",c.rightWidth),c.splitterRight.css("right","-"+c.rightWidth),c.splitHandleRight.one("touchstart mousedown",c.onHandleDown),h.className+=" has-right-pane",d.addNotification("openRight",function(){f.hasClass("opened-right")||(c.actionOnLeft=!1,c.onHandleClick(null))},g.id),d.addNotification("closeRight",function(){f.hasClass("opened-right")&&(c.actionOnLeft=!1,c.onHandleClick(null))},g.id)),c.splitterLeft&&(f.addClass("opened-left"),c.splitterLeft.css("left","0"),c.splitterMain.css("left",c.leftWidth),c.splitHandleLeft.css("left",c.leftWidth)),c.splitterRight&&(f.addClass("opened-right"),c.splitterRight.css("right","0"),c.splitterMain.css("right",c.rightWidth),c.splitHandleRight.css("right",c.rightWidth)),"undefined"!=typeof c.isLeftCollapsed&&c.splitterLeft&&c.$watch("isLeftCollapsed()",function(a){(a&&f.hasClass("opened-left")||!a&&!f.hasClass("opened-left"))&&(c.actionOnLeft=!0,c.onHandleClick(null))}),"undefined"!=typeof c.isRightCollapsed&&c.splitterRight&&c.$watch("isRightCollapsed()",function(a){(a&&f.hasClass("opened-right")||!a&&!f.hasClass("opened-right"))&&(c.actionOnLeft=!1,c.onHandleClick(null))}),c.autoResize()){var l=f[0].parentNode,m=f[0].querySelector(".bento-splitter-group-left"),n=f[0].querySelector(".bento-splitter-group-main-inner"),o=f[0].querySelector(".bento-splitter-group-right");l.style.minHeight=l.offsetHeight+"px",f.addClass("auto-resize");var p,q,r;m&&(p=document.createElement("div"),p.classNames="clearfix",m.appendChild(p)),r=document.createElement("div"),r.classNames="clearfix",n.appendChild(r),o&&(q=document.createElement("div"),q.classNames="clearfix",o.appendChild(q)),c.$watch(function(){var a=Math.max(p?p.offsetTop:0,q?q.offsetTop:0,r?r.offsetTop:0);return a},function(a){l.style.height=a+24+"px"})}a(function(){c.splitterLeft&&c.splitterLeft.addClass("animate"),c.splitterMain.addClass("animate"),c.splitterRight&&c.splitterRight.addClass("animate")},500)}}}]).directive("bentoSplitterGroupLeft",function(){return{require:"^bentoSplitterGroup",restrict:"A",scope:!1,link:function(a,b){b.addClass("bento-splitter-group-left")}}}).directive("bentoSplitterGroupRight",function(){return{require:"^bentoSplitterGroup",restrict:"A",scope:!1,link:function(a,b){b.addClass("bento-splitter-group-right")}}}).directive("bentoSplitterGroupMain",function(){return{require:"^bentoSplitterGroup",restrict:"A",replace:!0,transclude:!0,template:'<section class="bento-splitter-group-main">  <div class="bento-splitter-group-main-inner" data-ng-transclude></div></section>',scope:!1,link:function(){}}})}(window,window.angular);